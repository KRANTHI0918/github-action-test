name: aws-iam-authenticator

on:
  push:
  workflow_dispatch:

jobs:
  install-on-linux:
    runs-on: ubuntu-latest
    steps:
      - name: install aws-iam-authenticator
        run: |
          wget -q https://github.com/kubernetes-sigs/aws-iam-authenticator/releases/download/v0.5.2/aws-iam-authenticator_0.5.2_linux_amd64 \
            -O aws-iam-authenticator
          sudo mv aws-iam-authenticator /usr/local/bin
      - name: test installation
        run: |
          aws-iam-authenticator version
          aws-iam-authenticator help
  install-on-macos:
    runs-on: macos-latest
    steps:
      - name: install aws-iam-authenticator
        run: |
          wget -q https://github.com/kubernetes-sigs/aws-iam-authenticator/releases/download/v0.5.2/aws-iam-authenticator_0.5.2_darwin_amd64 \
            -O aws-iam-authenticator
          sudo mv aws-iam-authenticator /usr/local/bin
      - name: test installation
        run: |
          aws-iam-authenticator version
          aws-iam-authenticator help
